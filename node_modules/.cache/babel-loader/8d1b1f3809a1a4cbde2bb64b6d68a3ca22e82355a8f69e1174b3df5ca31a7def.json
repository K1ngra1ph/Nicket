{"ast":null,"code":"import React,{useEffect,useState}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PrizeCard=_ref=>{let{prize,onNavigate}=_ref;const progress=prize.active?65:100;return/*#__PURE__*/_jsxs(\"div\",{className:\"group bg-custom-card rounded-[32px] overflow-hidden border border-custom hover:border-brand-light dark:hover:border-brand-dark transition-all duration-300 flex flex-col h-full shadow-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative aspect-square overflow-hidden bg-gray-100 dark:bg-gray-800\",children:[/*#__PURE__*/_jsx(\"img\",{src:prize.image,alt:prize.title,className:\"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110\",onError:e=>{e.target.src='https://via.placeholder.com/600x600?text=No+Image';}}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-4 right-4 bg-black/50 backdrop-blur-md px-3 py-1 rounded-full text-white text-xs font-bold\",children:prize.category})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-8 flex flex-col flex-grow\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-albert font-bold mb-2 group-hover:text-brand-light dark:group-hover:text-brand-dark transition-colors\",children:prize.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-500 dark:text-gray-400 mb-6\",children:[\"Entry: \",/*#__PURE__*/_jsxs(\"span\",{className:\"text-current font-bold\",children:[\"\\u20A6\",prize.entryFee.toLocaleString()]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-end text-sm mb-2\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-brand-light dark:text-brand-dark font-black tracking-tighter text-lg\",children:prize.active?\"OPEN\":\"CLOSED\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-2 bg-gray-200 dark:bg-white/10 rounded-full overflow-hidden mb-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-full rounded-full transition-all duration-1000 \".concat(!prize.active?'bg-gray-400':'bg-brand-light dark:bg-brand-dark'),style:{width:\"\".concat(progress,\"%\")}})}),!prize.active?/*#__PURE__*/_jsx(\"button\",{disabled:true,className:\"w-full py-4 rounded-2xl bg-gray-200 dark:bg-white/5 text-gray-500 dark:text-gray-500 font-bold cursor-not-allowed border border-custom\",children:\"Draw Ended\"}):/*#__PURE__*/_jsx(\"button\",{onClick:()=>onNavigate('register'),className:\"block w-full py-4 rounded-2xl bg-custom-btn font-bold transition-all transform active:scale-95 shadow-lg text-center hover:opacity-90\",children:\"Play2Win\"})]})]})]});};const PrizeGrid=_ref2=>{let{onNavigate}=_ref2;const[prizes,setPrizes]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{const fetchEvents=async()=>{try{const res=await fetch(\"/events\");if(!res.ok)throw new Error(\"Failed to fetch\");const data=await res.json();const formattedPrizes=data.map(event=>({id:event._id,title:event.name,category:event.location||\"Online\",image:event.image||\"https://picsum.photos/seed/\".concat(event._id,\"/600/600\"),entryFee:event.price||1000,active:event.active}));setPrizes(formattedPrizes);}catch(err){console.error(\"Error loading prizes:\",err);}finally{setLoading(false);}};fetchEvents();},[]);return/*#__PURE__*/_jsxs(\"section\",{className:\"max-w-7xl mx-auto px-6 py-32\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row md:items-end justify-between mb-16 gap-8\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-5xl font-albert font-bold mb-4 italic\",children:\"Prizes To Be Won\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xl text-gray-500 dark:text-gray-400\",children:\"Exclusive items and experiences just a play away.\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-4\",children:/*#__PURE__*/_jsx(\"button\",{className:\"px-8 py-3 rounded-full bg-brand-light dark:bg-brand-dark text-white dark:text-black font-bold text-sm shadow-md transition-colors\",children:loading?\"Loading...\":\"\".concat(prizes.length,\" Events Available\")})})]}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-20 text-gray-400 animate-pulse\",children:\"Loading Events from Backend...\"}):prizes.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-20 text-gray-500\",children:\"No active lottery events found. Check back soon!\"}):/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8\",children:prizes.map(prize=>/*#__PURE__*/_jsx(PrizeCard,{prize:prize,onNavigate:onNavigate},prize.id))})]});};export default PrizeGrid;","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","PrizeCard","_ref","prize","onNavigate","progress","active","className","children","src","image","alt","title","onError","e","target","category","entryFee","toLocaleString","concat","style","width","disabled","onClick","PrizeGrid","_ref2","prizes","setPrizes","loading","setLoading","fetchEvents","res","fetch","ok","Error","data","json","formattedPrizes","map","event","id","_id","name","location","price","err","console","error","length"],"sources":["/workspaces/Nicket/src/components/PrizeGrid.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { TabType } from '../App';\n\ninterface PrizeGridProps {\n  onNavigate: (tab: TabType) => void;\n}\n\ninterface PrizeCardProps {\n  prize: Prize;\n  onNavigate: (tab: TabType) => void;\n}\n\ninterface BackendEvent {\n  _id: string;\n  name: string;\n  location: string;\n  price: number;\n  active: boolean;\n  currency: string;\n  image?: string;\n}\n\ninterface Prize {\n  id: string;\n  title: string;\n  category: string;\n  image: string;\n  entryFee: number;\n  active: boolean;\n}\n\nconst PrizeCard: React.FC<PrizeCardProps> = ({ prize, onNavigate }) => {\n  const progress = prize.active ? 65 : 100; \n\n  return (\n    <div className=\"group bg-custom-card rounded-[32px] overflow-hidden border border-custom hover:border-brand-light dark:hover:border-brand-dark transition-all duration-300 flex flex-col h-full shadow-lg\">\n      <div className=\"relative aspect-square overflow-hidden bg-gray-100 dark:bg-gray-800\">\n        <img \n          src={prize.image} \n          alt={prize.title} \n          className=\"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110\" \n          onError={(e) => {\n            (e.target as HTMLImageElement).src = 'https://via.placeholder.com/600x600?text=No+Image';\n          }}\n        />\n        <div className=\"absolute top-4 right-4 bg-black/50 backdrop-blur-md px-3 py-1 rounded-full text-white text-xs font-bold\">\n          {prize.category}\n        </div>\n      </div>\n      \n      <div className=\"p-8 flex flex-col flex-grow\">\n        <h3 className=\"text-2xl font-albert font-bold mb-2 group-hover:text-brand-light dark:group-hover:text-brand-dark transition-colors\">\n          {prize.title}\n        </h3>\n        <p className=\"text-gray-500 dark:text-gray-400 mb-6\">\n          Entry: <span className=\"text-current font-bold\">â‚¦{prize.entryFee.toLocaleString()}</span>\n        </p>\n\n        <div className=\"mt-auto\">\n          <div className=\"flex justify-end text-sm mb-2\">\n            <span className=\"text-brand-light dark:text-brand-dark font-black tracking-tighter text-lg\">\n              {prize.active ? \"OPEN\" : \"CLOSED\"}\n            </span>\n          </div>\n          \n          <div className=\"w-full h-2 bg-gray-200 dark:bg-white/10 rounded-full overflow-hidden mb-8\">\n            <div \n              className={`h-full rounded-full transition-all duration-1000 ${!prize.active ? 'bg-gray-400' : 'bg-brand-light dark:bg-brand-dark'}`}\n              style={{ width: `${progress}%` }}\n            ></div>\n          </div>\n\n          {!prize.active ? (\n            <button \n              disabled\n              className=\"w-full py-4 rounded-2xl bg-gray-200 dark:bg-white/5 text-gray-500 dark:text-gray-500 font-bold cursor-not-allowed border border-custom\"\n            >\n              Draw Ended\n            </button>\n          ) : (\n            <button \n              onClick={() => onNavigate('register')}\n              className=\"block w-full py-4 rounded-2xl bg-custom-btn font-bold transition-all transform active:scale-95 shadow-lg text-center hover:opacity-90\"\n            >\n              Play2Win\n            </button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst PrizeGrid: React.FC<PrizeGridProps> = ({ onNavigate }) => {\n  const [prizes, setPrizes] = useState<Prize[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchEvents = async () => {\n      try {\n        const res = await fetch(\"/events\"); \n        \n        if (!res.ok) throw new Error(\"Failed to fetch\");\n        \n        const data: BackendEvent[] = await res.json();\n\n        const formattedPrizes: Prize[] = data.map((event) => ({\n          id: event._id,\n          title: event.name,\n          category: event.location || \"Online\",\n          image: event.image || `https://picsum.photos/seed/${event._id}/600/600`, \n          \n          entryFee: event.price || 1000,\n          active: event.active\n        }));\n\n        setPrizes(formattedPrizes);\n      } catch (err) {\n        console.error(\"Error loading prizes:\", err);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchEvents();\n  }, []);\n\n  return (\n    <section className=\"max-w-7xl mx-auto px-6 py-32\">\n      <div className=\"flex flex-col md:flex-row md:items-end justify-between mb-16 gap-8\">\n        <div>\n          <h2 className=\"text-5xl font-albert font-bold mb-4 italic\">Prizes To Be Won</h2>\n          <p className=\"text-xl text-gray-500 dark:text-gray-400\">Exclusive items and experiences just a play away.</p>\n        </div>\n        <div className=\"flex gap-4\">\n          <button className=\"px-8 py-3 rounded-full bg-brand-light dark:bg-brand-dark text-white dark:text-black font-bold text-sm shadow-md transition-colors\">\n            {loading ? \"Loading...\" : `${prizes.length} Events Available`}\n          </button>\n        </div>\n      </div>\n\n      {loading ? (\n        <div className=\"text-center py-20 text-gray-400 animate-pulse\">Loading Events from Backend...</div>\n      ) : prizes.length === 0 ? (\n        <div className=\"text-center py-20 text-gray-500\">No active lottery events found. Check back soon!</div>\n      ) : (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8\">\n          {prizes.map(prize => (\n            <PrizeCard key={prize.id} prize={prize} onNavigate={onNavigate} />\n          ))}\n        </div>\n      )}\n    </section>\n  );\n};\n\nexport default PrizeGrid;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}